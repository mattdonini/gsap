import"./styles/style.css";import{gsap}from"gsap";document.addEventListener("DOMContentLoaded",(()=>{class t{constructor(t,e=18){this.el=t,this.chars="!<>-\\/[]{}â€”=+*^?#_____",this.update=this.update.bind(this),this.duration=e}setText(t){const e=this.el.innerText,i=Math.max(e.length,t.length),a=new Promise((t=>this.resolve=t));this.queue=[];for(let a=0;a<i;a++){const i=e[a]||"",s=t[a]||"",r=Math.floor(10*Math.random()),o=r+this.duration;this.queue.push({from:i,to:s,start:r,end:o})}return cancelAnimationFrame(this.frameRequest),this.frame=0,this.update(),a}update(){let t="",e=0;for(let a=0,s=this.queue.length;a<s;a++){let{from:s,to:r,start:o,end:n,char:l}=this.queue[a];const h=1===(i=Math.min(Math.max((this.frame-o)/(n-o),0),1))?1:1-Math.pow(2,-10*i);this.frame>=n?(e++,t+=r):this.frame>=o?((!l||Math.random()<.28)&&(l=this.randomChar(),this.queue[a].char=l),t+=h<1?`<span>${l}</span>`:r):t+=s}var i;this.el.innerHTML=t,e===this.queue.length?this.resolve():(this.frameRequest=requestAnimationFrame(this.update),this.frame++)}randomChar(){return this.chars[Math.floor(Math.random()*this.chars.length)]}}class e extends t{constructor(t,e=9){super(t,e),this.el.addEventListener("mouseenter",(()=>this.handleMouseEnter()))}handleMouseEnter(){if(this.isScrambling)return;this.isScrambling=!0,this.el.style.pointerEvents="none";const t=this.el.innerText;this.setText(t).then((()=>{setTimeout((()=>{this.el.innerText=t,this.el.style.pointerEvents="",this.isScrambling=!1}),500)}))}}document.querySelectorAll(".paragraph.is-support-medium.is-selector.is-scramble, .paragraph.is-support-medium.is-scramble").forEach((t=>{new e(t)}));const i=document.querySelectorAll(".threads_title-item"),a=document.querySelectorAll(".threads_trigger-item");i.forEach((t=>{const e=t.querySelector(".is-eyebrow"),i=t.querySelector(".h-h3");gsap.set(e,{opacity:0,y:"-100%",visibility:"hidden"}),gsap.set(i,{opacity:0,y:"-100%",visibility:"hidden"})}));let s=!1,r=null,o={eyebrow:null,h3:null};if(a.length>0){const t=a[0].getAttribute("data-threads-id"),e=document.querySelector(`.threads_title-item[data-threads-id="${t}"] .is-eyebrow`),i=document.querySelector(`.threads_title-item[data-threads-id="${t}"] .h-h3`);e&&i?(gsap.set(e,{opacity:1,y:"0%",visibility:"visible"}),gsap.set(i,{opacity:1,y:"0%",visibility:"visible"}),o={eyebrow:e,h3:i}):console.error(`No matching target found with data-threads-id="${t}"`)}const n={threads_img_1:"holographic",threads_img_2:"prism",threads_img_3:"metallic"};a.forEach((t=>{t.addEventListener("click",(()=>{s&&(r&&r.kill(),o.eyebrow&&o.h3&&(gsap.set(o.eyebrow,{opacity:0,y:"100%",visibility:"hidden"}),gsap.set(o.h3,{opacity:0,y:"100%",visibility:"hidden"}))),s=!0;const e=t.getAttribute("data-threads-id"),i=document.querySelector(`.threads_title-item[data-threads-id="${e}"] .is-eyebrow`),a=document.querySelector(`.threads_title-item[data-threads-id="${e}"] .h-h3`),c=n[e],u=document.querySelector(`.touchpoint_wrap[data-touchpoint-id="${c}"]`);var y,m;i&&a?(r=gsap.timeline({onComplete:()=>{s=!1,o={eyebrow:i,h3:a}}}),o.eyebrow&&o.h3&&r.add((y=o.eyebrow,m=o.h3,gsap.timeline().to(y,{opacity:0,y:"100%",duration:.3,ease:"power2.in",onComplete:()=>{y.style.visibility="hidden"}},0).to(m,{opacity:0,y:"100%",duration:.3,ease:"power2.in",onComplete:()=>{m.style.visibility="hidden"}},0)),0),r.add((()=>((t,e)=>gsap.timeline().fromTo(t,{opacity:0,y:"-100%",visibility:"visible"},{opacity:1,y:"0%",duration:.3,ease:"power2.out"},0).fromTo(e,{opacity:0,y:"-100%",visibility:"visible"},{opacity:1,y:"0%",duration:.3,ease:"power2.out"},0))(i,a)),"+=0.1")):(console.error(`No matching target found with data-threads-id="${e}"`),s=!1),u?(d.forEach((t=>{t!==u&&h(t)})),r.add((()=>l(u)),"+=0.1")):console.error(`No matching touchpoint found with data-touchpoint-id="${c}"`)}))}));const l=t=>gsap.fromTo(t,{opacity:.5,scale:.5,visibility:"visible"},{opacity:1,scale:1,duration:.3,ease:"expo.out"}),h=t=>gsap.to(t,{opacity:.5,scale:.5,duration:.3,ease:"expo.in",onComplete:()=>{t.style.visibility="hidden"}}),d=document.querySelectorAll(".touchpoint_wrap.is-holographic, .touchpoint_wrap.is-prism, .touchpoint_wrap.is-metallic");if(d.forEach((t=>{gsap.set(t,{opacity:0,visibility:"hidden"})})),a.length>0){const t=a[0].getAttribute("data-threads-id"),e=document.querySelector(`.touchpoint_wrap[data-touchpoint-id="${n[t]}"]`);e&&gsap.set(e,{opacity:1,visibility:"visible"})}const c=document.querySelectorAll(".garment_item"),u=document.querySelectorAll(".h-h6.is-info"),y=document.querySelectorAll(".paragraph.is-info");u.forEach((t=>{t.style.visibility="hidden"})),y.forEach((t=>{t.style.visibility="hidden"}));const m=(e,i)=>new t(e,i).setText(e.dataset.text),p=t=>{t.style.visibility="hidden"};if(c.length>0){const t=c[0].getAttribute("data-garment-id"),e=document.querySelector(`.h-h6.is-info[data-garment-id="${t}"]`),i=document.querySelector(`.paragraph.is-info[data-garment-id="${t}"]`);e&&i&&(e.style.visibility="visible",e.dataset.text=e.innerText,i.style.visibility="visible",i.dataset.text=i.innerText,m(e,10),m(i,10))}c.forEach((t=>{t.addEventListener("click",(()=>{const e=t.getAttribute("data-garment-id"),i=document.querySelector(`.h-h6.is-info[data-garment-id="${e}"]`),a=document.querySelector(`.paragraph.is-info[data-garment-id="${e}"]`);i&&a?(u.forEach((t=>{"visible"===t.style.visibility&&p(t)})),y.forEach((t=>{"visible"===t.style.visibility&&p(t)})),i.style.visibility="visible",i.dataset.text=i.innerText,a.style.visibility="visible",a.dataset.text=a.innerText,m(i,10),m(a,10)):console.error(`No matching heading or paragraph found with data-garment-id="${e}"`)}))}))}));